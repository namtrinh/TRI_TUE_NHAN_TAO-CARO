<html>
<head>
<title>Play2Players.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cf8e6d;}
.s1 { color: #bcbec4;}
.s2 { color: #bcbec4;}
.s3 { color: #5f826b; font-style: italic;}
.s4 { color: #6aab73;}
.s5 { color: #2aacb8;}
.s6 { color: #7a7e85;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
Play2Players.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span><span class="s1">com</span><span class="s2">.</span><span class="s1">caro</span><span class="s2">.</span><span class="s1">TicTacToe</span><span class="s2">;</span>

<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">awt</span><span class="s2">.*;</span>
<span class="s0">import </span><span class="s1">java</span><span class="s2">.</span><span class="s1">awt</span><span class="s2">.</span><span class="s1">event</span><span class="s2">.*;</span>
<span class="s0">import </span><span class="s1">javax</span><span class="s2">.</span><span class="s1">swing</span><span class="s2">.*;</span>

<span class="s0">import static </span><span class="s1">com</span><span class="s2">.</span><span class="s1">caro</span><span class="s2">.</span><span class="s1">JFrameMain</span><span class="s2">.</span><span class="s1">jFrame</span><span class="s2">;</span>

<span class="s3">/**</span>
 <span class="s3">* Tic-Tac-Toe: Two-player Graphics version with Simple-OO</span>
 <span class="s3">*/</span>
<span class="s1">@SuppressWarnings</span><span class="s2">(</span><span class="s4">&quot;serial&quot;</span><span class="s2">)</span>
<span class="s0">public class </span><span class="s1">Play2Players </span><span class="s0">extends </span><span class="s1">JFrame </span><span class="s2">{</span>
    <span class="s0">public static int </span><span class="s1">newRow </span><span class="s2">=</span><span class="s5">3</span><span class="s2">;</span>
    <span class="s0">protected </span><span class="s1">Seed PlayerReRun</span><span class="s2">;</span>
    <span class="s0">public static int </span><span class="s1">rowPreSelected </span><span class="s2">= -</span><span class="s5">1</span><span class="s2">;</span>
    <span class="s0">public static int </span><span class="s1">colPreSelected </span><span class="s2">= -</span><span class="s5">1</span><span class="s2">;</span>
    <span class="s0">public static int </span><span class="s1">rowPreDiLai</span><span class="s2">;</span>
    <span class="s0">public static int </span><span class="s1">colPreDiLai</span><span class="s2">;</span>
    <span class="s6">// Named-constants for the game board</span>
    <span class="s0">public static  int </span><span class="s1">ROWS </span><span class="s2">= </span><span class="s5">3</span><span class="s2">;  </span><span class="s6">// ROWS by COLS cells</span>
    <span class="s0">public static  int </span><span class="s1">COLS </span><span class="s2">= </span><span class="s5">3</span><span class="s2">;</span>
    <span class="s0">public static </span><span class="s1">String Player1Name</span><span class="s2">;</span>
    <span class="s0">public static </span><span class="s1">String Player2Name</span><span class="s2">;</span>
    <span class="s0">public static boolean </span><span class="s1">Player1TwoMove</span><span class="s2">;</span>
    <span class="s0">public static int </span><span class="s1">STEPS</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span>

    <span class="s6">// Named-constants of the various dimensions used for graphics drawing</span>
    <span class="s0">public static  int </span><span class="s1">CELL_SIZE </span><span class="s2">= </span><span class="s5">100</span><span class="s2">; </span><span class="s6">// cell width and height (square)</span>
    <span class="s0">public static  int </span><span class="s1">CANVAS_WIDTH </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">* </span><span class="s1">COLS</span><span class="s2">;  </span><span class="s6">// the drawing canvas</span>
    <span class="s0">public static  int </span><span class="s1">CANVAS_HEIGHT </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">* </span><span class="s1">ROWS</span><span class="s2">;</span>
    <span class="s0">public static  int </span><span class="s1">GRID_WIDTH </span><span class="s2">= </span><span class="s5">2</span><span class="s2">;                   </span><span class="s6">// Grid-line's width</span>
    <span class="s0">public static  int </span><span class="s1">GRID_WIDHT_HALF </span><span class="s2">= </span><span class="s1">GRID_WIDTH </span><span class="s2">/ </span><span class="s5">2</span><span class="s2">; </span><span class="s6">// Grid-line's half-width</span>
    <span class="s6">// Symbols (cross/nought) are displayed inside a cell, with padding from border</span>
    <span class="s0">public static  int </span><span class="s1">CELL_PADDING </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">/ </span><span class="s5">6</span><span class="s2">;</span>
    <span class="s0">public static  int </span><span class="s1">SYMBOL_SIZE </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">- </span><span class="s1">CELL_PADDING </span><span class="s2">* </span><span class="s5">2</span><span class="s2">; </span><span class="s6">// width/height</span>
    <span class="s0">public static  int </span><span class="s1">SYMBOL_STROKE_WIDTH </span><span class="s2">= </span><span class="s5">8</span><span class="s2">; </span><span class="s6">// pen's stroke width</span>
    <span class="s0">private </span><span class="s1">JPanel jhjh</span><span class="s2">;</span>
    <span class="s0">private </span><span class="s1">JList list1</span><span class="s2">;</span>
    <span class="s0">private </span><span class="s1">JEditorPane ụuuEditorPane</span><span class="s2">;</span>

    <span class="s6">// Use an enumeration (inner class) to represent the various states of the game</span>
    <span class="s0">public enum </span><span class="s1">GameState </span><span class="s2">{</span>
        <span class="s1">PLAYING</span><span class="s2">, </span><span class="s1">DRAW</span><span class="s2">, </span><span class="s1">CROSS_WON</span><span class="s2">, </span><span class="s1">NOUGHT_WON</span>
    <span class="s2">}</span>
    <span class="s0">protected </span><span class="s1">GameState currentState</span><span class="s2">;  </span><span class="s6">// the current game state</span>

    <span class="s6">// Use an enumeration (inner class) to represent the seeds and cell contents</span>
    <span class="s0">public enum </span><span class="s1">Seed </span><span class="s2">{</span>
        <span class="s1">EMPTY</span><span class="s2">, </span><span class="s1">CROSS</span><span class="s2">, </span><span class="s1">NOUGHT</span>
    <span class="s2">}</span>
    <span class="s0">protected </span><span class="s1">Seed currentPlayer</span><span class="s2">;  </span><span class="s6">// the current player</span>

    <span class="s0">public </span><span class="s1">Seed</span><span class="s2">[][] </span><span class="s1">board   </span><span class="s2">; </span><span class="s6">// Game board of ROWS-by-COLS cells</span>
    <span class="s0">protected </span><span class="s1">DrawCanvas canvas</span><span class="s2">; </span><span class="s6">// Drawing canvas (JPanel) for the game board</span>
    <span class="s0">protected </span><span class="s1">JLabel statusBar</span><span class="s2">;  </span><span class="s6">// Status Bar</span>
    <span class="s0">protected </span><span class="s1">JPanel pnButton</span><span class="s2">;</span>
    <span class="s0">protected </span><span class="s1">Button btnDiLai</span><span class="s2">;</span>
    <span class="s0">protected </span><span class="s1">Button btnBoDiLai</span><span class="s2">;</span>


    <span class="s3">/** Constructor to setup the game and the GUI components */</span>
    <span class="s0">public </span><span class="s1">Play2Players</span><span class="s2">(</span><span class="s1">String name1</span><span class="s2">, </span><span class="s1">String name2</span><span class="s2">) {</span>
        <span class="s1">STEPS</span><span class="s2">=</span><span class="s5">0</span><span class="s2">;</span>
        <span class="s1">PlayGame</span><span class="s2">(</span><span class="s1">name1</span><span class="s2">,</span><span class="s1">name2</span><span class="s2">);</span>
    <span class="s2">}</span>

    <span class="s6">// Set up lại kích cỡ bàn cờ.</span>
    <span class="s0">public void </span><span class="s1">SetUpBoard</span><span class="s2">(</span><span class="s0">int </span><span class="s1">row</span><span class="s2">){</span>
        <span class="s1">ROWS </span><span class="s2">= </span><span class="s1">row</span><span class="s2">;</span>
        <span class="s1">COLS </span><span class="s2">= </span><span class="s1">row</span><span class="s2">;</span>
        <span class="s0">if </span><span class="s2">( </span><span class="s1">row </span><span class="s2">&lt;= </span><span class="s5">10 </span><span class="s2">) {</span>
            <span class="s1">CELL_SIZE </span><span class="s2">= (</span><span class="s5">20 </span><span class="s2">/ </span><span class="s1">row</span><span class="s2">) * </span><span class="s5">25</span><span class="s2">;</span>
            <span class="s1">CANVAS_WIDTH </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">* </span><span class="s1">COLS</span><span class="s2">;</span>
            <span class="s1">CANVAS_HEIGHT </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">* </span><span class="s1">ROWS</span><span class="s2">;</span>
            <span class="s1">CELL_PADDING </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">/ </span><span class="s5">6</span><span class="s2">;</span>
            <span class="s1">SYMBOL_SIZE </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">- </span><span class="s1">CELL_PADDING </span><span class="s2">* </span><span class="s5">2</span><span class="s2">;</span>
        <span class="s2">}</span><span class="s0">else </span><span class="s2">{</span>
            <span class="s1">CELL_SIZE </span><span class="s2">= (</span><span class="s5">20 </span><span class="s2">/ </span><span class="s1">row</span><span class="s2">) * </span><span class="s5">45</span><span class="s2">;</span>
            <span class="s1">CANVAS_WIDTH </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">* </span><span class="s1">COLS</span><span class="s2">;</span>
            <span class="s1">CANVAS_HEIGHT </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">* </span><span class="s1">ROWS</span><span class="s2">;</span>
            <span class="s1">CELL_PADDING </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">/ </span><span class="s5">6</span><span class="s2">;</span>
            <span class="s1">SYMBOL_SIZE </span><span class="s2">= </span><span class="s1">CELL_SIZE </span><span class="s2">- </span><span class="s1">CELL_PADDING </span><span class="s2">* </span><span class="s5">2</span><span class="s2">;</span>
        <span class="s2">}</span>
    <span class="s2">}</span>

    <span class="s0">protected void </span><span class="s1">PlayGame</span><span class="s2">(</span><span class="s1">String name1</span><span class="s2">, </span><span class="s1">String name2</span><span class="s2">){</span>
        <span class="s1">SetUpBoard</span><span class="s2">(</span><span class="s1">newRow</span><span class="s2">);</span>
        <span class="s1">Player1Name </span><span class="s2">= </span><span class="s1">name1</span><span class="s2">;</span>
        <span class="s1">Player2Name </span><span class="s2">= </span><span class="s1">name2</span><span class="s2">;</span>
        <span class="s1">canvas </span><span class="s2">= </span><span class="s0">new </span><span class="s1">DrawCanvas</span><span class="s2">();  </span><span class="s6">// Construct a drawing canvas (a JPanel)</span>
        <span class="s1">canvas</span><span class="s2">.</span><span class="s1">setPreferredSize</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Dimension</span><span class="s2">(</span><span class="s1">CANVAS_WIDTH</span><span class="s2">, </span><span class="s1">CANVAS_HEIGHT</span><span class="s2">));</span>
        <span class="s1">JMenuBar menuBar </span><span class="s2">= </span><span class="s0">new </span><span class="s1">JMenuBar</span><span class="s2">();</span>
        <span class="s1">JMenu gameMenu </span><span class="s2">= </span><span class="s0">new </span><span class="s1">JMenu</span><span class="s2">(</span><span class="s4">&quot;Game&quot;</span><span class="s2">);</span>
        <span class="s1">JMenuItem newGameMenuItem </span><span class="s2">= </span><span class="s0">new </span><span class="s1">JMenuItem</span><span class="s2">(</span><span class="s4">&quot;Chơi ván mới&quot;</span><span class="s2">);</span>
        <span class="s1">JMenuItem exitMenuItem </span><span class="s2">= </span><span class="s0">new </span><span class="s1">JMenuItem</span><span class="s2">(</span><span class="s4">&quot;Thoát&quot;</span><span class="s2">);</span>
        <span class="s1">Font menuFont </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Font</span><span class="s2">(</span><span class="s4">&quot;Arial&quot;</span><span class="s2">, </span><span class="s1">Font</span><span class="s2">.</span><span class="s1">PLAIN</span><span class="s2">, </span><span class="s5">16</span><span class="s2">); </span><span class="s6">// Thiết lập kiểu chữ và kích thước mong muốn</span>
        <span class="s1">gameMenu</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">menuFont</span><span class="s2">); </span><span class="s6">// Thiết lập kiểu chữ và kích thước cho menu &quot;Game&quot;</span>
        <span class="s1">newGameMenuItem</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">menuFont</span><span class="s2">); </span><span class="s6">// Thiết lập kiểu chữ và kích thước cho mục &quot;Chơi ván mới&quot;</span>
        <span class="s1">exitMenuItem</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s1">menuFont</span><span class="s2">); </span><span class="s6">// Thiết lập kiểu chữ và kích thước cho mục &quot;Thoát&quot;</span>

        <span class="s1">canvas</span><span class="s2">.</span><span class="s1">addMouseListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">MouseAdapter</span><span class="s2">() {</span>
            <span class="s1">@Override</span>
            <span class="s0">public void </span><span class="s1">mouseClicked</span><span class="s2">(</span><span class="s1">MouseEvent e</span><span class="s2">) {  </span><span class="s6">// mouse-clicked handler</span>
                <span class="s0">int </span><span class="s1">mouseX </span><span class="s2">= </span><span class="s1">e</span><span class="s2">.</span><span class="s1">getX</span><span class="s2">();</span>
                <span class="s0">int </span><span class="s1">mouseY </span><span class="s2">= </span><span class="s1">e</span><span class="s2">.</span><span class="s1">getY</span><span class="s2">();</span>
                <span class="s6">// Get the row and column clicked</span>
                <span class="s0">int </span><span class="s1">rowSelected </span><span class="s2">= </span><span class="s1">mouseY </span><span class="s2">/ </span><span class="s1">CELL_SIZE</span><span class="s2">;</span>
                <span class="s0">int </span><span class="s1">colSelected </span><span class="s2">= </span><span class="s1">mouseX </span><span class="s2">/ </span><span class="s1">CELL_SIZE</span><span class="s2">;</span>

                <span class="s0">if </span><span class="s2">(</span><span class="s1">currentState </span><span class="s2">== </span><span class="s1">GameState</span><span class="s2">.</span><span class="s1">PLAYING</span><span class="s2">) {</span>
                    <span class="s0">if </span><span class="s2">(</span><span class="s1">rowSelected </span><span class="s2">&gt;= </span><span class="s5">0 </span><span class="s2">&amp;&amp; </span><span class="s1">rowSelected </span><span class="s2">&lt; </span><span class="s1">ROWS </span><span class="s2">&amp;&amp; </span><span class="s1">colSelected </span><span class="s2">&gt;= </span><span class="s5">0</span>
                            <span class="s2">&amp;&amp; </span><span class="s1">colSelected </span><span class="s2">&lt; </span><span class="s1">COLS </span><span class="s2">&amp;&amp; </span><span class="s1">board</span><span class="s2">[</span><span class="s1">rowSelected</span><span class="s2">][</span><span class="s1">colSelected</span><span class="s2">] == </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">EMPTY</span><span class="s2">) {</span>
                        <span class="s1">rowPreSelected </span><span class="s2">= </span><span class="s1">rowSelected</span><span class="s2">;</span>
                        <span class="s1">colPreSelected </span><span class="s2">= </span><span class="s1">colSelected</span><span class="s2">;</span>
                        <span class="s1">board</span><span class="s2">[</span><span class="s1">rowSelected</span><span class="s2">][</span><span class="s1">colSelected</span><span class="s2">] = </span><span class="s1">currentPlayer</span><span class="s2">; </span><span class="s6">// Make a move</span>
                        <span class="s1">updateGame</span><span class="s2">(</span><span class="s1">currentPlayer</span><span class="s2">, </span><span class="s1">rowSelected</span><span class="s2">, </span><span class="s1">colSelected</span><span class="s2">); </span><span class="s6">// update state</span>
                        <span class="s6">// Switch player</span>
                        <span class="s1">currentPlayer </span><span class="s2">= (</span><span class="s1">currentPlayer </span><span class="s2">== </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">CROSS</span><span class="s2">) ? </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">NOUGHT </span><span class="s2">: </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">CROSS</span><span class="s2">;</span>
                        <span class="s1">STEPS</span><span class="s2">++;</span>
                    <span class="s2">}</span>
                    <span class="s1">btnDiLai</span><span class="s2">.</span><span class="s1">setEnabled</span><span class="s2">(</span><span class="s0">true</span><span class="s2">);</span>
                    <span class="s1">btnBoDiLai</span><span class="s2">.</span><span class="s1">setEnabled</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span>
                <span class="s2">} </span><span class="s0">else </span><span class="s2">{       </span><span class="s6">// game over</span>
                    <span class="s1">initGame</span><span class="s2">(); </span><span class="s6">// restart the game</span>
                <span class="s2">}</span>
                <span class="s6">// Refresh the drawing canvas</span>
                <span class="s1">repaint</span><span class="s2">();  </span><span class="s6">// Call-back paintComponent().</span>
            <span class="s2">}</span>
        <span class="s2">});</span>

        <span class="s6">// Setup the status bar (JLabel) to display status message</span>
        <span class="s1">statusBar </span><span class="s2">= </span><span class="s0">new </span><span class="s1">JLabel</span><span class="s2">(</span><span class="s4">&quot;  &quot;</span><span class="s2">);</span>
        <span class="s1">statusBar</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Font</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">DIALOG_INPUT</span><span class="s2">, </span><span class="s1">Font</span><span class="s2">.</span><span class="s1">BOLD</span><span class="s2">, </span><span class="s5">15</span><span class="s2">));</span>
        <span class="s1">statusBar</span><span class="s2">.</span><span class="s1">setBorder</span><span class="s2">(</span><span class="s1">BorderFactory</span><span class="s2">.</span><span class="s1">createEmptyBorder</span><span class="s2">(</span><span class="s5">2</span><span class="s2">, </span><span class="s5">5</span><span class="s2">, </span><span class="s5">4</span><span class="s2">, </span><span class="s5">5</span><span class="s2">));</span>

        <span class="s6">//Thêm Button</span>
        <span class="s1">btnDiLai </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Button</span><span class="s2">(</span><span class="s4">&quot;Đi lại&quot;</span><span class="s2">);</span>
        <span class="s1">btnDiLai</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Font</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">DIALOG_INPUT</span><span class="s2">, </span><span class="s1">Font</span><span class="s2">.</span><span class="s1">BOLD</span><span class="s2">, </span><span class="s5">15</span><span class="s2">));</span>
        <span class="s1">btnDiLai</span><span class="s2">.</span><span class="s1">setEnabled</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span>
        <span class="s6">//btnDiLai.setSize(10,10);</span>

        <span class="s1">btnDiLai</span><span class="s2">.</span><span class="s1">addActionListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">ActionListener</span><span class="s2">() {</span>
            <span class="s1">@Override</span>
            <span class="s0">public void </span><span class="s1">actionPerformed</span><span class="s2">(</span><span class="s1">ActionEvent e</span><span class="s2">) {</span>
                <span class="s0">if</span><span class="s2">(</span><span class="s1">currentState </span><span class="s2">!= </span><span class="s1">GameState</span><span class="s2">.</span><span class="s1">PLAYING</span><span class="s2">) </span><span class="s0">return</span><span class="s2">;</span>
                <span class="s0">if</span><span class="s2">(</span><span class="s1">STEPS</span><span class="s2">==</span><span class="s5">0</span><span class="s2">) </span><span class="s0">return</span><span class="s2">;</span>
                <span class="s1">rowPreDiLai </span><span class="s2">=</span><span class="s1">rowPreSelected</span><span class="s2">;</span>
                <span class="s1">colPreDiLai </span><span class="s2">=</span><span class="s1">colPreSelected</span><span class="s2">;</span>
                <span class="s1">PlayerReRun </span><span class="s2">= </span><span class="s1">board</span><span class="s2">[</span><span class="s1">rowPreSelected</span><span class="s2">][</span><span class="s1">colPreSelected</span><span class="s2">];</span>
                <span class="s1">currentPlayer </span><span class="s2">= </span><span class="s1">PlayerReRun</span><span class="s2">;</span>
                <span class="s1">board</span><span class="s2">[</span><span class="s1">rowPreSelected</span><span class="s2">][</span><span class="s1">colPreSelected</span><span class="s2">] = </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">EMPTY</span><span class="s2">;</span>
                <span class="s1">btnBoDiLai</span><span class="s2">.</span><span class="s1">setEnabled</span><span class="s2">(</span><span class="s0">true</span><span class="s2">);</span>
                <span class="s1">btnDiLai</span><span class="s2">.</span><span class="s1">setEnabled</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span>
                <span class="s1">repaint</span><span class="s2">();</span>
            <span class="s2">}</span>
        <span class="s2">});</span>

        <span class="s1">btnBoDiLai </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Button</span><span class="s2">(</span><span class="s4">&quot;Bỏ đi lại&quot;</span><span class="s2">);</span>
        <span class="s1">btnBoDiLai</span><span class="s2">.</span><span class="s1">setFont</span><span class="s2">(</span><span class="s0">new </span><span class="s1">Font</span><span class="s2">(</span><span class="s1">Font</span><span class="s2">.</span><span class="s1">DIALOG_INPUT</span><span class="s2">, </span><span class="s1">Font</span><span class="s2">.</span><span class="s1">BOLD</span><span class="s2">, </span><span class="s5">15</span><span class="s2">));</span>
        <span class="s1">btnBoDiLai</span><span class="s2">.</span><span class="s1">setEnabled</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span>
        <span class="s6">//btnDiLai.setSize(10,10);</span>

        <span class="s1">btnBoDiLai</span><span class="s2">.</span><span class="s1">addActionListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">ActionListener</span><span class="s2">() {</span>
            <span class="s1">@Override</span>
            <span class="s0">public void </span><span class="s1">actionPerformed</span><span class="s2">(</span><span class="s1">ActionEvent e</span><span class="s2">) {</span>
                <span class="s0">if</span><span class="s2">(</span><span class="s1">currentState </span><span class="s2">!= </span><span class="s1">GameState</span><span class="s2">.</span><span class="s1">PLAYING</span><span class="s2">) </span><span class="s0">return</span><span class="s2">;</span>
                <span class="s0">if</span><span class="s2">(</span><span class="s1">STEPS </span><span class="s2">== </span><span class="s5">0 </span><span class="s2">|| </span><span class="s1">PlayerReRun </span><span class="s2">== </span><span class="s0">null </span><span class="s2">) </span><span class="s0">return</span><span class="s2">;</span>
                <span class="s1">board</span><span class="s2">[</span><span class="s1">rowPreDiLai</span><span class="s2">][</span><span class="s1">colPreDiLai</span><span class="s2">] = </span><span class="s1">PlayerReRun</span><span class="s2">;</span>
                <span class="s1">currentPlayer </span><span class="s2">= (</span><span class="s1">currentPlayer </span><span class="s2">== </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">CROSS</span><span class="s2">) ? </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">NOUGHT </span><span class="s2">: </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">CROSS</span><span class="s2">;</span>
                <span class="s1">btnBoDiLai</span><span class="s2">.</span><span class="s1">setEnabled</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span>
                <span class="s1">repaint</span><span class="s2">();</span>
            <span class="s2">}</span>
        <span class="s2">});</span>

        <span class="s1">newGameMenuItem</span><span class="s2">.</span><span class="s1">addActionListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">ActionListener</span><span class="s2">() {</span>
            <span class="s0">public void </span><span class="s1">actionPerformed</span><span class="s2">(</span><span class="s1">ActionEvent e</span><span class="s2">) {</span>
                <span class="s1">initGame</span><span class="s2">(); </span><span class="s6">// Bắt đầu ván mới</span>
                <span class="s1">repaint</span><span class="s2">(); </span><span class="s6">// Vẽ lại bàn cờ</span>
            <span class="s2">}</span>
        <span class="s2">});</span>

        <span class="s1">exitMenuItem</span><span class="s2">.</span><span class="s1">addActionListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">ActionListener</span><span class="s2">() {</span>
            <span class="s0">public void </span><span class="s1">actionPerformed</span><span class="s2">(</span><span class="s1">ActionEvent e</span><span class="s2">) {</span>
                <span class="s1">System</span><span class="s2">.</span><span class="s1">exit</span><span class="s2">(</span><span class="s5">0</span><span class="s2">); </span><span class="s6">// Thoát ứng dụng</span>
            <span class="s2">}</span>
        <span class="s2">});</span>

        <span class="s1">gameMenu</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s1">newGameMenuItem</span><span class="s2">);</span>
        <span class="s1">gameMenu</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s1">exitMenuItem</span><span class="s2">);</span>
        <span class="s1">menuBar</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s1">gameMenu</span><span class="s2">);</span>
        <span class="s1">setJMenuBar</span><span class="s2">(</span><span class="s1">menuBar</span><span class="s2">);</span>

        <span class="s1">pnButton </span><span class="s2">= </span><span class="s0">new </span><span class="s1">JPanel</span><span class="s2">();</span>
        <span class="s1">pnButton</span><span class="s2">.</span><span class="s1">setLayout</span><span class="s2">(</span><span class="s0">new </span><span class="s1">FlowLayout</span><span class="s2">(</span><span class="s1">FlowLayout</span><span class="s2">.</span><span class="s1">CENTER</span><span class="s2">));</span>
        <span class="s1">pnButton</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s1">btnDiLai</span><span class="s2">);</span>
        <span class="s1">pnButton</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s1">btnBoDiLai</span><span class="s2">);</span>

        <span class="s1">Container cp </span><span class="s2">= </span><span class="s1">getContentPane</span><span class="s2">();</span>
        <span class="s1">cp</span><span class="s2">.</span><span class="s1">setLayout</span><span class="s2">(</span><span class="s0">new </span><span class="s1">BorderLayout</span><span class="s2">());</span>
        <span class="s1">cp</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s1">canvas</span><span class="s2">, </span><span class="s1">BorderLayout</span><span class="s2">.</span><span class="s1">CENTER</span><span class="s2">);</span>
        <span class="s1">cp</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s1">statusBar</span><span class="s2">, </span><span class="s1">BorderLayout</span><span class="s2">.</span><span class="s1">PAGE_END</span><span class="s2">); </span><span class="s6">// same as SOUTH</span>
        <span class="s1">cp</span><span class="s2">.</span><span class="s1">add</span><span class="s2">(</span><span class="s1">pnButton</span><span class="s2">, </span><span class="s1">BorderLayout</span><span class="s2">.</span><span class="s1">PAGE_START</span><span class="s2">);</span>

        <span class="s1">pack</span><span class="s2">();  </span><span class="s6">// pack all the components in this JFrame</span>
        <span class="s1">setTitle</span><span class="s2">(</span><span class="s4">&quot;Tic Tac Toe 2 người&quot;</span><span class="s2">);</span>
        <span class="s1">setLocationRelativeTo</span><span class="s2">(</span><span class="s0">null</span><span class="s2">);</span>
        <span class="s1">setVisible</span><span class="s2">(</span><span class="s0">true</span><span class="s2">);  </span><span class="s6">// show this JFrame</span>

        <span class="s1">addWindowListener</span><span class="s2">(</span><span class="s0">new </span><span class="s1">WindowAdapter</span><span class="s2">() {</span>
            <span class="s1">@Override</span>
            <span class="s0">public void </span><span class="s1">windowClosing</span><span class="s2">(</span><span class="s1">WindowEvent e</span><span class="s2">) {</span>
                <span class="s1">jFrame</span><span class="s2">.</span><span class="s1">setVisible</span><span class="s2">(</span><span class="s0">true</span><span class="s2">);</span>
            <span class="s2">}</span>
        <span class="s2">});</span>

        <span class="s1">board </span><span class="s2">= </span><span class="s0">new </span><span class="s1">Seed</span><span class="s2">[</span><span class="s1">ROWS</span><span class="s2">][</span><span class="s1">COLS</span><span class="s2">]; </span><span class="s6">// allocate array</span>
        <span class="s1">initGame</span><span class="s2">(); </span><span class="s6">// initialize the game board contents and game variables</span>
    <span class="s2">}</span>

    <span class="s3">/** Initialize the game-board contents and the status */</span>
    <span class="s0">public void </span><span class="s1">initGame</span><span class="s2">() {</span>
        <span class="s1">btnDiLai</span><span class="s2">.</span><span class="s1">setEnabled</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span>
        <span class="s1">btnBoDiLai</span><span class="s2">.</span><span class="s1">setEnabled</span><span class="s2">(</span><span class="s0">false</span><span class="s2">);</span>
        <span class="s1">STEPS </span><span class="s2">= </span><span class="s5">0</span><span class="s2">;</span>
        <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">row </span><span class="s2">= </span><span class="s5">0</span><span class="s2">; </span><span class="s1">row </span><span class="s2">&lt; </span><span class="s1">ROWS</span><span class="s2">; ++</span><span class="s1">row</span><span class="s2">) {</span>
            <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">col </span><span class="s2">= </span><span class="s5">0</span><span class="s2">; </span><span class="s1">col </span><span class="s2">&lt; </span><span class="s1">COLS</span><span class="s2">; ++</span><span class="s1">col</span><span class="s2">) {</span>
                <span class="s1">board</span><span class="s2">[</span><span class="s1">row</span><span class="s2">][</span><span class="s1">col</span><span class="s2">] = </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">EMPTY</span><span class="s2">; </span><span class="s6">// all cells empty</span>
            <span class="s2">}</span>
        <span class="s2">}</span>
        <span class="s1">currentState </span><span class="s2">= </span><span class="s1">GameState</span><span class="s2">.</span><span class="s1">PLAYING</span><span class="s2">; </span><span class="s6">// ready to play</span>
        <span class="s1">currentPlayer </span><span class="s2">= </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">CROSS</span><span class="s2">;       </span><span class="s6">// cross plays first</span>
    <span class="s2">}</span>

    <span class="s3">/** Update the currentState after the player with &quot;theSeed&quot; has placed on</span>
     <span class="s3">(rowSelected, colSelected). */</span>
    <span class="s0">public void </span><span class="s1">updateGame</span><span class="s2">(</span><span class="s1">Seed theSeed</span><span class="s2">, </span><span class="s0">int </span><span class="s1">rowSelected</span><span class="s2">, </span><span class="s0">int </span><span class="s1">colSelected</span><span class="s2">) {</span>
        <span class="s0">if </span><span class="s2">(</span><span class="s1">hasWon</span><span class="s2">(</span><span class="s1">theSeed</span><span class="s2">, </span><span class="s1">rowSelected</span><span class="s2">, </span><span class="s1">colSelected</span><span class="s2">)) {  </span><span class="s6">// check for win</span>
            <span class="s1">currentState </span><span class="s2">= (</span><span class="s1">theSeed </span><span class="s2">== </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">CROSS</span><span class="s2">) ? </span><span class="s1">GameState</span><span class="s2">.</span><span class="s1">CROSS_WON </span><span class="s2">: </span><span class="s1">GameState</span><span class="s2">.</span><span class="s1">NOUGHT_WON</span><span class="s2">;</span>

            <span class="s0">if</span><span class="s2">(</span><span class="s1">theSeed </span><span class="s2">== </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">CROSS</span><span class="s2">){</span>

                <span class="s1">JOptionPane</span><span class="s2">.</span><span class="s1">showMessageDialog</span><span class="s2">(</span><span class="s0">null</span><span class="s2">,</span><span class="s1">Player1Name</span><span class="s2">+</span><span class="s4">&quot; thắng rồi! Click chuột để chơi lại&quot;</span><span class="s2">);</span>
            <span class="s2">}</span>
            <span class="s0">else </span><span class="s2">{</span>
                <span class="s1">JOptionPane</span><span class="s2">.</span><span class="s1">showMessageDialog</span><span class="s2">(</span><span class="s0">null</span><span class="s2">, </span><span class="s1">Player2Name </span><span class="s2">+ </span><span class="s4">&quot; thắng rồi! Click chuột để chơi lại&quot;</span><span class="s2">);</span>
                <span class="s2">}</span>
        <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">isDraw</span><span class="s2">()) {  </span><span class="s6">// check for draw</span>
            <span class="s1">currentState </span><span class="s2">= </span><span class="s1">GameState</span><span class="s2">.</span><span class="s1">DRAW</span><span class="s2">;</span>
            <span class="s1">JOptionPane</span><span class="s2">.</span><span class="s1">showMessageDialog</span><span class="s2">(</span><span class="s0">null</span><span class="s2">,</span><span class="s4">&quot;Hòa rồi! Click chuột để chơi lại&quot;</span><span class="s2">);</span>
        <span class="s2">}</span>
        <span class="s6">// Otherwise, no change to current state (still GameState.PLAYING).</span>
    <span class="s2">}</span>

    <span class="s3">/** Return true if it is a draw (i.e., no more empty cell) */</span>
    <span class="s0">public boolean </span><span class="s1">isDraw</span><span class="s2">() {</span>
        <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">row </span><span class="s2">= </span><span class="s5">0</span><span class="s2">; </span><span class="s1">row </span><span class="s2">&lt; </span><span class="s1">ROWS</span><span class="s2">; ++</span><span class="s1">row</span><span class="s2">) {</span>
            <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">col </span><span class="s2">= </span><span class="s5">0</span><span class="s2">; </span><span class="s1">col </span><span class="s2">&lt; </span><span class="s1">COLS</span><span class="s2">; ++</span><span class="s1">col</span><span class="s2">) {</span>
                <span class="s0">if </span><span class="s2">(</span><span class="s1">board</span><span class="s2">[</span><span class="s1">row</span><span class="s2">][</span><span class="s1">col</span><span class="s2">] == </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">EMPTY</span><span class="s2">) {</span>
                    <span class="s0">return false</span><span class="s2">; </span><span class="s6">// an empty cell found, not draw, exit</span>
                <span class="s2">}</span>
            <span class="s2">}</span>
        <span class="s2">}</span>
        <span class="s0">return true</span><span class="s2">;  </span><span class="s6">// no more empty cell, it's a draw</span>
    <span class="s2">}</span>

    <span class="s3">/** Return true if the player with &quot;theSeed&quot; has won after placing at</span>
     <span class="s3">(rowSelected, colSelected) */</span>
    <span class="s0">public boolean </span><span class="s1">hasWon</span><span class="s2">(</span><span class="s1">Seed theSeed</span><span class="s2">, </span><span class="s0">int </span><span class="s1">rowSelected</span><span class="s2">, </span><span class="s0">int </span><span class="s1">colSelected</span><span class="s2">) {</span>
        <span class="s0">return </span><span class="s2">(</span><span class="s1">board</span><span class="s2">[</span><span class="s1">rowSelected</span><span class="s2">][</span><span class="s5">0</span><span class="s2">] == </span><span class="s1">theSeed  </span><span class="s6">// 3-in-the-row</span>
                <span class="s2">&amp;&amp; </span><span class="s1">board</span><span class="s2">[</span><span class="s1">rowSelected</span><span class="s2">][</span><span class="s5">1</span><span class="s2">] == </span><span class="s1">theSeed</span>
                <span class="s2">&amp;&amp; </span><span class="s1">board</span><span class="s2">[</span><span class="s1">rowSelected</span><span class="s2">][</span><span class="s5">2</span><span class="s2">] == </span><span class="s1">theSeed</span>
                <span class="s2">|| </span><span class="s1">board</span><span class="s2">[</span><span class="s5">0</span><span class="s2">][</span><span class="s1">colSelected</span><span class="s2">] == </span><span class="s1">theSeed      </span><span class="s6">// 3-in-the-column</span>
                <span class="s2">&amp;&amp; </span><span class="s1">board</span><span class="s2">[</span><span class="s5">1</span><span class="s2">][</span><span class="s1">colSelected</span><span class="s2">] == </span><span class="s1">theSeed</span>
                <span class="s2">&amp;&amp; </span><span class="s1">board</span><span class="s2">[</span><span class="s5">2</span><span class="s2">][</span><span class="s1">colSelected</span><span class="s2">] == </span><span class="s1">theSeed</span>
                <span class="s2">|| </span><span class="s1">rowSelected </span><span class="s2">== </span><span class="s1">colSelected            </span><span class="s6">// 3-in-the-diagonal</span>
                <span class="s2">&amp;&amp; </span><span class="s1">board</span><span class="s2">[</span><span class="s5">0</span><span class="s2">][</span><span class="s5">0</span><span class="s2">] == </span><span class="s1">theSeed</span>
                <span class="s2">&amp;&amp; </span><span class="s1">board</span><span class="s2">[</span><span class="s5">1</span><span class="s2">][</span><span class="s5">1</span><span class="s2">] == </span><span class="s1">theSeed</span>
                <span class="s2">&amp;&amp; </span><span class="s1">board</span><span class="s2">[</span><span class="s5">2</span><span class="s2">][</span><span class="s5">2</span><span class="s2">] == </span><span class="s1">theSeed</span>
                <span class="s2">|| </span><span class="s1">rowSelected </span><span class="s2">+ </span><span class="s1">colSelected </span><span class="s2">== </span><span class="s5">2  </span><span class="s6">// 3-in-the-opposite-diagonal</span>
                <span class="s2">&amp;&amp; </span><span class="s1">board</span><span class="s2">[</span><span class="s5">0</span><span class="s2">][</span><span class="s5">2</span><span class="s2">] == </span><span class="s1">theSeed</span>
                <span class="s2">&amp;&amp; </span><span class="s1">board</span><span class="s2">[</span><span class="s5">1</span><span class="s2">][</span><span class="s5">1</span><span class="s2">] == </span><span class="s1">theSeed</span>
                <span class="s2">&amp;&amp; </span><span class="s1">board</span><span class="s2">[</span><span class="s5">2</span><span class="s2">][</span><span class="s5">0</span><span class="s2">] == </span><span class="s1">theSeed</span><span class="s2">);</span>
    <span class="s2">}</span>
    <span class="s3">/**</span>
     <span class="s3">*  Inner class DrawCanvas (extends JPanel) used for custom graphics drawing.</span>
     <span class="s3">*/</span>
    <span class="s0">public class </span><span class="s1">DrawCanvas </span><span class="s0">extends </span><span class="s1">JPanel </span><span class="s2">{</span>

        <span class="s1">@Override</span>
        <span class="s0">public void </span><span class="s1">paintComponent</span><span class="s2">(</span><span class="s1">Graphics g</span><span class="s2">) {  </span><span class="s6">// invoke via repaint()</span>
            <span class="s0">super</span><span class="s2">.</span><span class="s1">paintComponent</span><span class="s2">(</span><span class="s1">g</span><span class="s2">);    </span><span class="s6">// fill background</span>
            <span class="s1">setBackground</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">WHITE</span><span class="s2">); </span><span class="s6">// set its background color</span>

            <span class="s6">// Draw the grid-lines</span>
            <span class="s1">g</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">LIGHT_GRAY</span><span class="s2">);</span>
            <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">row </span><span class="s2">= </span><span class="s5">1</span><span class="s2">; </span><span class="s1">row </span><span class="s2">&lt; </span><span class="s1">ROWS</span><span class="s2">; ++</span><span class="s1">row</span><span class="s2">) {</span>
                <span class="s1">g</span><span class="s2">.</span><span class="s1">fillRoundRect</span><span class="s2">(</span><span class="s5">0</span><span class="s2">, </span><span class="s1">CELL_SIZE </span><span class="s2">* </span><span class="s1">row </span><span class="s2">- </span><span class="s1">GRID_WIDHT_HALF</span><span class="s2">,</span>
                        <span class="s1">CANVAS_WIDTH</span><span class="s2">-</span><span class="s5">1</span><span class="s2">, </span><span class="s1">GRID_WIDTH</span><span class="s2">, </span><span class="s1">GRID_WIDTH</span><span class="s2">, </span><span class="s1">GRID_WIDTH</span><span class="s2">);</span>
            <span class="s2">}</span>
            <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">col </span><span class="s2">= </span><span class="s5">1</span><span class="s2">; </span><span class="s1">col </span><span class="s2">&lt; </span><span class="s1">COLS</span><span class="s2">; ++</span><span class="s1">col</span><span class="s2">) {</span>
                <span class="s1">g</span><span class="s2">.</span><span class="s1">fillRoundRect</span><span class="s2">(</span><span class="s1">CELL_SIZE </span><span class="s2">* </span><span class="s1">col </span><span class="s2">- </span><span class="s1">GRID_WIDHT_HALF</span><span class="s2">, </span><span class="s5">0</span><span class="s2">,</span>
                        <span class="s1">GRID_WIDTH</span><span class="s2">, </span><span class="s1">CANVAS_HEIGHT</span><span class="s2">-</span><span class="s5">1</span><span class="s2">, </span><span class="s1">GRID_WIDTH</span><span class="s2">, </span><span class="s1">GRID_WIDTH</span><span class="s2">);</span>
            <span class="s2">}</span>

            <span class="s6">// Draw the Seeds of all the cells if they are not empty</span>
            <span class="s6">// Use Graphics2D which allows us to set the pen's stroke</span>
            <span class="s1">Graphics2D g2d </span><span class="s2">= (</span><span class="s1">Graphics2D</span><span class="s2">)</span><span class="s1">g</span><span class="s2">;</span>
            <span class="s1">g2d</span><span class="s2">.</span><span class="s1">setStroke</span><span class="s2">(</span><span class="s0">new </span><span class="s1">BasicStroke</span><span class="s2">(</span><span class="s1">SYMBOL_STROKE_WIDTH</span><span class="s2">, </span><span class="s1">BasicStroke</span><span class="s2">.</span><span class="s1">CAP_ROUND</span><span class="s2">,</span>
                    <span class="s1">BasicStroke</span><span class="s2">.</span><span class="s1">JOIN_ROUND</span><span class="s2">));  </span><span class="s6">// Graphics2D only</span>
            <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">row </span><span class="s2">= </span><span class="s5">0</span><span class="s2">; </span><span class="s1">row </span><span class="s2">&lt; </span><span class="s1">ROWS</span><span class="s2">; ++</span><span class="s1">row</span><span class="s2">) {</span>
                <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">col </span><span class="s2">= </span><span class="s5">0</span><span class="s2">; </span><span class="s1">col </span><span class="s2">&lt; </span><span class="s1">COLS</span><span class="s2">; ++</span><span class="s1">col</span><span class="s2">) {</span>
                    <span class="s0">int </span><span class="s1">x1 </span><span class="s2">= </span><span class="s1">col </span><span class="s2">* </span><span class="s1">CELL_SIZE </span><span class="s2">+ </span><span class="s1">CELL_PADDING</span><span class="s2">;</span>
                    <span class="s0">int </span><span class="s1">y1 </span><span class="s2">= </span><span class="s1">row </span><span class="s2">* </span><span class="s1">CELL_SIZE </span><span class="s2">+ </span><span class="s1">CELL_PADDING</span><span class="s2">;</span>
                    <span class="s0">if </span><span class="s2">(</span><span class="s1">board</span><span class="s2">[</span><span class="s1">row</span><span class="s2">][</span><span class="s1">col</span><span class="s2">] == </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">CROSS</span><span class="s2">) {</span>
                        <span class="s1">g2d</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">RED</span><span class="s2">);</span>
                        <span class="s0">int </span><span class="s1">x2 </span><span class="s2">= (</span><span class="s1">col </span><span class="s2">+ </span><span class="s5">1</span><span class="s2">) * </span><span class="s1">CELL_SIZE </span><span class="s2">- </span><span class="s1">CELL_PADDING</span><span class="s2">;</span>
                        <span class="s0">int </span><span class="s1">y2 </span><span class="s2">= (</span><span class="s1">row </span><span class="s2">+ </span><span class="s5">1</span><span class="s2">) * </span><span class="s1">CELL_SIZE </span><span class="s2">- </span><span class="s1">CELL_PADDING</span><span class="s2">;</span>
                        <span class="s1">g2d</span><span class="s2">.</span><span class="s1">drawLine</span><span class="s2">(</span><span class="s1">x1</span><span class="s2">, </span><span class="s1">y1</span><span class="s2">, </span><span class="s1">x2</span><span class="s2">, </span><span class="s1">y2</span><span class="s2">);</span>
                        <span class="s1">g2d</span><span class="s2">.</span><span class="s1">drawLine</span><span class="s2">(</span><span class="s1">x2</span><span class="s2">, </span><span class="s1">y1</span><span class="s2">, </span><span class="s1">x1</span><span class="s2">, </span><span class="s1">y2</span><span class="s2">);</span>
                    <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">board</span><span class="s2">[</span><span class="s1">row</span><span class="s2">][</span><span class="s1">col</span><span class="s2">] == </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">NOUGHT</span><span class="s2">) {</span>
                        <span class="s1">g2d</span><span class="s2">.</span><span class="s1">setColor</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">BLUE</span><span class="s2">);</span>
                        <span class="s1">g2d</span><span class="s2">.</span><span class="s1">drawOval</span><span class="s2">(</span><span class="s1">x1</span><span class="s2">, </span><span class="s1">y1</span><span class="s2">, </span><span class="s1">SYMBOL_SIZE</span><span class="s2">, </span><span class="s1">SYMBOL_SIZE</span><span class="s2">);</span>
                    <span class="s2">}</span>
                <span class="s2">}</span>
            <span class="s2">}</span>

            <span class="s6">// Print status-bar message</span>
            <span class="s0">if </span><span class="s2">(</span><span class="s1">currentState </span><span class="s2">== </span><span class="s1">GameState</span><span class="s2">.</span><span class="s1">PLAYING</span><span class="s2">) {</span>
                <span class="s1">statusBar</span><span class="s2">.</span><span class="s1">setForeground</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">BLACK</span><span class="s2">);</span>
                <span class="s0">if </span><span class="s2">(</span><span class="s1">currentPlayer </span><span class="s2">== </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">CROSS</span><span class="s2">) {</span>
                    <span class="s1">statusBar</span><span class="s2">.</span><span class="s1">setText</span><span class="s2">(</span><span class="s4">&quot;Lượt của &quot;</span><span class="s2">+</span><span class="s1">Player1Name</span><span class="s2">);</span>
                <span class="s2">} </span><span class="s0">else </span><span class="s2">{</span>
                    <span class="s1">statusBar</span><span class="s2">.</span><span class="s1">setText</span><span class="s2">(</span><span class="s4">&quot;Lượt của &quot;</span><span class="s2">+</span><span class="s1">Player2Name</span><span class="s2">);</span>
                <span class="s2">}</span>
            <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">currentState </span><span class="s2">== </span><span class="s1">GameState</span><span class="s2">.</span><span class="s1">DRAW</span><span class="s2">) {</span>
                <span class="s1">statusBar</span><span class="s2">.</span><span class="s1">setForeground</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">RED</span><span class="s2">);</span>
                <span class="s1">statusBar</span><span class="s2">.</span><span class="s1">setText</span><span class="s2">(</span><span class="s4">&quot;Hòa rồi! Click chuột để chơi lại&quot;</span><span class="s2">);</span>
            <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">currentState </span><span class="s2">== </span><span class="s1">GameState</span><span class="s2">.</span><span class="s1">CROSS_WON</span><span class="s2">) {</span>
                <span class="s1">statusBar</span><span class="s2">.</span><span class="s1">setForeground</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">RED</span><span class="s2">);</span>
                <span class="s1">statusBar</span><span class="s2">.</span><span class="s1">setText</span><span class="s2">(</span><span class="s1">Player1Name</span><span class="s2">+</span><span class="s4">&quot; thắng rồi! Click chuột để chơi lại&quot;</span><span class="s2">);</span>
            <span class="s2">} </span><span class="s0">else if </span><span class="s2">(</span><span class="s1">currentState </span><span class="s2">== </span><span class="s1">GameState</span><span class="s2">.</span><span class="s1">NOUGHT_WON</span><span class="s2">) {</span>
                <span class="s1">statusBar</span><span class="s2">.</span><span class="s1">setForeground</span><span class="s2">(</span><span class="s1">Color</span><span class="s2">.</span><span class="s1">RED</span><span class="s2">);</span>
                <span class="s1">statusBar</span><span class="s2">.</span><span class="s1">setText</span><span class="s2">(</span><span class="s1">Player2Name</span><span class="s2">+</span><span class="s4">&quot; thắng rồi! Click chuột để chơi lại&quot;</span><span class="s2">);</span>
            <span class="s2">}</span>
        <span class="s2">}</span>
    <span class="s2">}</span>
    <span class="s0">protected boolean </span><span class="s1">CheckEmptyBoard</span><span class="s2">(){</span>
        <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">row </span><span class="s2">= </span><span class="s5">0</span><span class="s2">; </span><span class="s1">row </span><span class="s2">&lt; </span><span class="s1">ROWS</span><span class="s2">; ++</span><span class="s1">row</span><span class="s2">) {</span>
            <span class="s0">for </span><span class="s2">(</span><span class="s0">int </span><span class="s1">col </span><span class="s2">= </span><span class="s5">0</span><span class="s2">; </span><span class="s1">col </span><span class="s2">&lt; </span><span class="s1">COLS</span><span class="s2">; ++</span><span class="s1">col</span><span class="s2">) {</span>
                <span class="s0">if </span><span class="s2">(</span><span class="s1">board</span><span class="s2">[</span><span class="s1">row</span><span class="s2">][</span><span class="s1">col</span><span class="s2">] != </span><span class="s1">Seed</span><span class="s2">.</span><span class="s1">EMPTY</span><span class="s2">) {</span>
                    <span class="s0">return false</span><span class="s2">; </span><span class="s6">// an empty cell found, not draw, exit</span>
                <span class="s2">}</span>
            <span class="s2">}</span>
        <span class="s2">}</span>
        <span class="s0">return true</span><span class="s2">;</span>
    <span class="s2">}</span>
<span class="s2">}</span>
</pre>
</body>
</html>